<loader loading="loading"></loader>
<div class="row column">
  <h1>Firmware</h1>
  <div class="column small-12 page-header">
    <h2 class="inline">Manage BMC and server firmware</h2>
  </div>
</div>
<div class="row column">
  <p><a ng-click="gotoAnchor()">Scroll down to upload an image file</a> to transfer a new firmware image to the BMC. After uploading a new image, Activate it to make it available for use.</p>
</div>

<div class="row column">
  <div class="firmware__actions">
    <button ng-disabled="activeSystemImages.length <= 1"
            ng-click="onClickChangeNextBoot()"
            class="btn btn-tertiary">
      <icon file="icon-config.svg"></icon>
      Change next boot image
    </button>
  </div>
</div>
<div class="row column">
  <bmc-table  data="tableData"
              header="tableHeader"
              row-actions-enabled="true"
              emit-row-action="onEmitRowAction(value)"
              class="system-firmware__table">
  </bmc-table>
</div>

<div class="row column" id="upload">
  <div class="column small-12 page-header">
    <h2 class="inline bold">Specify image file location</h2>
  </div>
  <form id="firmware__upload-form" role="form" class="firmware__upload-form">
    <p>Specify an image file located on your workstation or a TFTP server. An image file may contain firmware images for the server, BMC, or other hardware devices. Each image that you upload will be unpacked from the image file and added to the appropriate list above.</p>
    <div class=" column firmware__upload-station">
      <h3>Upload image file from workstation</h3>
      <p>Select the image file saved on the workstation storage medium to upload to the server BMC.</p>
      <label for="file-upload" class="inline firmware__upload-chooser">
        <input id="file-upload" type="file" file="file" class="hide"/>
        <span class="btn btn-secondary">Choose a file</span>
        <span class="inline firmware__upload-file-name"><span ng-if="!file">No file chosen</span><span ng-if="file.name !== undefined">{{file.name}}</span></span>
      </label>
      <input type="button" value="Upload firmware" class="btn btn-primary float-right" ng-click="upload()"/>
      <div class="inline uploading" ng-show="uploading">Upload in progress...</div>
    </div>
    <div class="column firmware__upload-tftp">
      <h3>Download image file from TFTP server</h3>
      <p>Specify both the TFTP server IP address and the image file name stored on it to download to the server BMC.</p>
      <fieldset>
        <div class="row">
          <div class="column small-12 large-4">
            <label for="tftp-ip">TFTP Server IP address</label>
            <input name="tftp-ip" id="tftp-ip" type="text"  ng-model="download_host"/>
          </div>
          <div class="column small-12 large-4">
            <label for="tftp-file-name">File name</label>
            <input name="tftp-file-name" id="tftp-file-name" type="text"  ng-model="download_filename"/>
          </div>
          <div class="column small-12 large-4">
            <input type="button" value="Download firmware" class="btn btn-primary float-right" ng-click="download()"/>
          </div>
        </div>
        <div class="inline uploading" ng-show="downloading">Downloading in progress...</div>
      </fieldset>
    </div>
  </form>
</div>